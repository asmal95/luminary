# Luminary - AI Code Reviewer для GitLab

Интеллектуальный ревьюер кода на основе LLM для автоматического анализа Merge Requests в GitLab.

## 🎯 Видение проекта

Развитие от инструмента для автоматического ревью кода до полноценного AI-агента, способного не только находить проблемы, но и предлагать улучшения, объяснять решения и обучаться на основе обратной связи.

**Текущая фаза:** MVP разработка - Этап 1 ✅

## 📋 Возможности (MVP)

- ✅ Автоматический анализ изменений в Merge Request
- ✅ Генерация inline-комментариев к коду
- ✅ Валидация комментариев перед отправкой
- ✅ Поддержка множественных LLM провайдеров (OpenRouter, OpenAI, DeepSeek, VLLM)
- ✅ Гибкая конфигурация через `.ai-reviewer.yml`
- ✅ Фильтрация бинарных и служебных файлов
- ✅ Retry стратегия для устойчивости к ошибкам
- ✅ Поддержка markdown в комментариях
- ✅ Уровни severity (info, warning, error)

## 🚀 Быстрый старт

### Установка

Проект использует [uv](https://github.com/astral-sh/uv) для управления зависимостями.

```bash
# Установка uv (если еще не установлен)
curl -LsSf https://astral.sh/uv/install.sh | sh

# Установка зависимостей
uv sync

# Активация виртуального окружения
source .venv/bin/activate  # Linux/Mac
# или
.venv\Scripts\activate  # Windows
```

### Использование (Этап 1 - прототип)

```bash
# Анализ одного файла
uv run luminary path/to/file.py

# С подробным логированием
uv run luminary path/to/file.py --verbose
```

## 🏗️ Архитектура

Проект использует многослойную архитектуру:

```
┌─────────────────────────────────────┐
│   Presentation Layer (CLI)          │
├─────────────────────────────────────┤
│   Application Layer (Orchestration) │
├─────────────────────────────────────┤
│   Domain Layer (Business Logic)     │
├─────────────────────────────────────┤
│   Infrastructure Layer (External)   │
└─────────────────────────────────────┘
```

### Структура проекта

```
luminary/
├── src/luminary/
│   ├── domain/           # Бизнес-логика и модели
│   ├── application/      # Оркестрация (сервисы)
│   ├── infrastructure/   # Внешние интеграции (GitLab, LLM)
│   └── presentation/     # CLI интерфейс
├── docs/                 # Документация
└── tests/                # Тесты
```

## 📚 Документация

- [Roadmap](ROADMAP.md) - детальный план разработки
- [ADR документы](docs/ADR/) - архитектурные решения
- [Архитектурное резюме](docs/ARCHITECTURE_SUMMARY.md)

## 🛠️ Разработка

### Установка зависимостей для разработки

```bash
uv sync --dev
```

### Запуск тестов

```bash
uv run pytest
```

### Форматирование кода

```bash
uv run black src/
uv run ruff check src/
```

## 📝 Лицензия

Лицензия будет определена позже.
