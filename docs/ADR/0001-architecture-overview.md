# ADR-0001: Общая архитектура проекта

## Статус
Принято

## Контекст
Проект представляет собой AI-ревьюер кода для GitLab (с возможностью расширения на GitHub). Требуется модульная, расширяемая архитектура, которая позволит легко добавлять новые провайдеры LLM и настраивать поведение системы.

## Решение
Применяется многослойная архитектура с четким разделением ответственности:

```
┌─────────────────────────────────────┐
│   Presentation Layer (CLI)          │
├─────────────────────────────────────┤
│   Application Layer (Orchestration) │
├─────────────────────────────────────┤
│   Domain Layer (Business Logic)     │
├─────────────────────────────────────┤
│   Infrastructure Layer (External)   │
└─────────────────────────────────────┘
```

### Слои:

1. **Presentation Layer**: CLI интерфейс, парсинг аргументов, валидация входных данных
2. **Application Layer**: Оркестрация бизнес-логики, координация между доменными сервисами
3. **Domain Layer**: Ядро бизнес-логики (анализ кода, валидация комментариев, генерация промптов)
4. **Infrastructure Layer**: Внешние интеграции (GitLab API, LLM провайдеры, файловая система)

## Последствия

### Положительные:
- Четкое разделение ответственности
- Легкое тестирование каждого слоя
- Возможность замены реализации на уровне инфраструктуры
- Расширяемость без изменения ядра

### Отрицательные:
- Небольшое усложнение для простых случаев
- Необходимость четкого следования архитектуре
