# ADR-0009: Формат комментариев

## Статус
Принято

## Контекст
Необходимо определить формат комментариев, которые отправляются в GitLab: inline или summary, поддержка markdown, уровни severity.

## Решение

### Режимы комментариев (выбор через CLI/конфиг):
1. **inline**: Только inline комментарии к конкретным строкам
2. **summary**: Только общее резюме по файлу/MR
3. **both**: И inline, и summary (по умолчанию)

### Inline комментарии:
- Привязка к конкретным строкам кода
- Формат: `line_number: комментарий`
- Поддержка диапазонов строк для больших блоков

### Summary комментарии:
- Общее резюме по файлу или всему MR
- Структурированный формат (markdown)
- Список основных замечаний

### Markdown поддержка:
- GitLab поддерживает markdown в комментариях
- Используем markdown для форматирования:
  - **Жирный текст** для важных замечаний
  - `Код` для примеров
  - Списки для перечисления проблем
  - Блоки кода для предложений

### Уровни severity:
- **info**: Информационные замечания, предложения по улучшению
- **warning**: Потенциальные проблемы, не критичные
- **error**: Критические проблемы, которые нужно исправить

### Формат комментария:
```markdown
**[severity]** Заголовок замечания

Описание проблемы...

**Предложение:**
```python
# Пример исправления
```

**Контекст:** строка X-Y
```

## Последствия

### Положительные:
- Гибкость в выборе формата
- Улучшенная читаемость через markdown
- Приоритизация через severity levels

### Отрицательные:
- Более сложная генерация промптов
- Необходимость парсинга ответов LLM для извлечения severity
